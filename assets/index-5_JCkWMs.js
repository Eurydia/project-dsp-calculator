import{j as e,r as m,d as Ye}from"./vendor_react-DJDv7HU-.js";import{P as Q,I as Z,J as ae,S as le,L as U,N as Be}from"./vendor-DU9mMee0.js";import{s as de,P as ue,T as ze,I as oe,G as M,a as A,R as $,b as qe,c as se,S,d as X,C as Ke,E as Xe,e as He,M as E,L as T,f as b,g as ee,h as C,i as pe,j as fe,k as me,l as he,m as O,B as Je,F as k,n as Y,o as B,p as z,q as D,D as Ve,r as Qe,A as Ze,t as et,u as tt,U as rt,v as H,w as nt,x as ot,y as st,z as it,H as ct,J as at}from"./vendor_mui-CoPxVQLZ.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();const F=t=>`./images/${t.replaceAll(" ","_").toLowerCase()}.webp`,ye=t=>{switch(t.sprayCount){case 12:return"./images/proliferator_mk.i.webp";case 24:return"./images/proliferator_mk.ii.webp";case 60:return"./images/proliferator_mk.iii.webp"}return"./images/none.webp"},x=de(ue)(({theme:t})=>({padding:t.spacing(2),display:"flex",flexDirection:"column",gap:t.spacing(2)})),q=t=>{const{placeholder:n,disabled:o,maxLength:s,prefix:r,suffix:i,label:c,value:a,onChange:l}=t,p=d=>{const u=d.target.value.slice(0,s).normalize();l(u)};return e.jsx(ze,{fullWidth:!0,placeholder:n,disabled:o,label:c,value:a,onChange:p,InputProps:{startAdornment:e.jsx(oe,{position:"start",children:r}),endAdornment:e.jsx(oe,{position:"end",children:i})}})},lt=t=>{const{data:n,handlers:o}=t,s=(a,l)=>{o.handleComputeModeChange(l)},r=n.computeMode==="0"?n.constraint:n.capacity,i=n.computeMode==="0"?o.handleConstraintUpdate:o.handleCapacityUpdate,c=Object.entries(r).map(([a,l])=>e.jsxs(M,{item:!0,xs:12,md:6,display:"flex",alignItems:"center",children:[e.jsx(q,{label:a,maxLength:6,suffix:"/min",prefix:e.jsx("img",{alt:a,src:F(a)}),value:l,onChange:p=>i(a,p)}),e.jsx(A,{size:"small",color:"primary",children:e.jsx($,{}),onClick:()=>i(a,"")})]},a));return e.jsxs(x,{square:!0,elevation:2,children:[e.jsxs(qe,{value:n.computeMode,onChange:s,children:[e.jsx(se,{disableRipple:!0,label:"Constraint",value:"0"}),e.jsx(se,{disableRipple:!0,label:"Capacity",value:"1"})]}),e.jsx(M,{container:!0,spacing:2,children:c})]})},N=t=>{const{title:n,children:o}=t,[s,r]=m.useState(!0),i=()=>{r(!s)},c=s?e.jsx(Xe,{}):e.jsx(He,{});return e.jsxs(m.Fragment,{children:[e.jsxs(S,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(X,{fontWeight:"500",fontSize:"large",color:"secondary.main",children:n}),e.jsx(A,{disableRipple:!0,size:"small",color:"primary",onClick:i,children:c})]}),e.jsx(Ke,{in:s,children:e.jsx(S,{spacing:2,children:o})})]})},J=t=>ae.get(t),dt=()=>[...ae.values()],ut=t=>{for(const n of Z.values())if(n.recipeType===t)return n},V=t=>Z.get(t),pt=()=>[...Z.values()],G=t=>Q.get(t),ft=()=>[...Q.values()],mt=t=>{for(const n of Q.values())if(n.mode===t)return n},ht=()=>[...le.values()],xe=t=>le.get(t),yt=t=>{const{onChange:n,value:o}=t,{current:s}=m.useRef(dt()),r=c=>{const a=J(c.target.value);a!==void 0&&n(a)},i=s.map(({label:c})=>e.jsxs(E,{value:c,disableRipple:!0,children:[e.jsx(T,{children:e.jsx("img",{src:F(c),alt:c})}),e.jsx(b,{children:c})]},c));return e.jsx(ee,{size:"small",value:o.label,onChange:r,SelectDisplayProps:{style:{display:"flex",alignItems:"center"}},children:i})},xt=t=>{const n=()=>{i(r,"")},o=c=>{i(r,c)},{value:s,label:r,onChange:i}=t;return e.jsxs(S,{direction:"row",alignItems:"center",children:[e.jsx(q,{label:r,maxLength:6,value:s,suffix:"/min",onChange:o,prefix:e.jsx("img",{alt:r,src:F(r)})}),e.jsx(A,{disableRipple:!0,size:"small",color:"primary",children:e.jsx($,{}),onClick:n})]})},jt=t=>{const{defaultValue:n,disabled:o,onChange:s,value:r}=t,i=()=>{s(n)};return e.jsxs(S,{direction:"row",alignItems:"center",children:[e.jsx(q,{disabled:o,placeholder:n,maxLength:6,label:"Spray Count",value:r,onChange:s,suffix:"sprays"}),e.jsx(A,{disableRipple:!0,disabled:o,size:"small",color:"primary",children:e.jsx($,{}),onClick:i})]})},gt=t=>{const{onChange:n,value:o,speedupOnly:s}=t,{current:r}=m.useRef(ft()),i=d=>{const u=G(d.target.value);u!==void 0&&n(u)},c=[],a=[];for(const d of r)s&&d.mode===U.EXTRA_PRODUCTS?a.push(d):c.push(d);const l=c.map(d=>{const{label:u}=d;return e.jsxs(E,{value:u,disableRipple:!0,children:[u!=="None"&&e.jsx(T,{children:e.jsx("img",{src:ye(d),alt:u})}),e.jsx(b,{children:u})]},u)}),p=a.map(({label:d})=>e.jsx(E,{disabled:!0,value:d,disableRipple:!0,children:e.jsx(b,{children:d})},d));return e.jsxs(ee,{size:"small",value:o.label,onChange:i,SelectDisplayProps:{style:{display:"flex",alignItems:"center"}},children:[l,p]})},Ct=t=>{const{onChange:n,value:o,recipeType:s}=t,{current:r}=m.useRef(pt()),i=d=>{const u=V(d.target.value);u!==void 0&&n(u)},c=[],a=[];for(const d of r)d.recipeType===s?c.push(d):a.push(d);const l=c.map(({label:d})=>e.jsxs(E,{value:d,disableRipple:!0,children:[e.jsx(T,{children:e.jsx("img",{src:F(d),alt:d})}),e.jsx(b,{children:d})]},d)),p=a.map(({label:d})=>e.jsx(E,{disabled:!0,value:d,disableRipple:!0,children:e.jsx(b,{children:d})},d));return e.jsxs(ee,{size:"small",value:o.label,onChange:i,SelectDisplayProps:{style:{display:"flex",alignItems:"center"}},children:[l,p]})},St=t=>{const{prefix:n,suffix:o,value:s,label:r,onChange:i}=t,c=()=>{i(r,"")},a=l=>{i(r,l)};return e.jsxs(S,{direction:"row",alignItems:"center",children:[e.jsx(q,{label:r,maxLength:6,value:s,onChange:a,suffix:o,prefix:n}),e.jsx(A,{disableTouchRipple:!0,size:"small",color:"primary",children:e.jsx($,{}),onClick:c})]})},Rt=t=>{const{data:n,handlers:o}=t,s=Object.entries(n.flowrate).map(([i,c])=>e.jsx(xt,{value:c,label:i,onChange:o.handleFlowrateChange},i)),r=Object.entries(n.sorter).map(([i,c])=>e.jsx(St,{prefix:e.jsx("img",{src:F(i),alt:i}),label:i,value:c,onChange:o.handleSorterChange},i));return e.jsxs(S,{spacing:2,children:[e.jsx(X,{fontWeight:"600",fontSize:"x-large",color:"secondary.main",children:"Configuration"}),e.jsxs(X,{fontWeight:"400",fontSize:"small",children:["DSP version: ",Be]}),e.jsxs(N,{title:"Manufacturing",children:[e.jsx(yt,{value:n.facility,onChange:o.handleFacilityChange}),e.jsx(Ct,{value:n.recipe,onChange:o.handleRecipeChange,recipeType:n.facility.recipeType})]}),e.jsx(N,{title:"Transport capacity",children:e.jsx(S,{spacing:1,children:s})}),e.jsxs(N,{title:"Proliferation",children:[e.jsx(gt,{value:n.proliferator,speedupOnly:n.recipe.speedupOnly,onChange:o.handleProliferatorChange}),e.jsx(jt,{defaultValue:n.proliferator.sprayCount.toString(),value:n.proliferatorSprayCount,disabled:n.proliferator.label==="None",onChange:o.handleProliferatorSprayCountChange})]}),e.jsx(N,{title:"Sorter connections",children:e.jsx(S,{spacing:1,children:r})})]})},P=de(C)(({theme:t})=>({color:t.palette.secondary.main})),bt=new Intl.NumberFormat("en-US",{maximumSignificantDigits:6,signDisplay:"exceptZero"}),R=t=>bt.format(t),ie=t=>{const{label:n,perArray:o,perFacility:s,perTotal:r}=t,c=[r,o,s].map((l,p)=>e.jsx(C,{colSpan:1,align:"right",children:R(l)},`${n}-${p}`));let a=F(n);if(n.includes("(materials)")||n.includes("(products)")){const l=G(n.replaceAll("(materials)","").replaceAll("(products)","").trim());l!==void 0&&(a=ye(l))}return e.jsxs(O,{children:[e.jsx(C,{colSpan:1,sx:{display:"flex",justifyContent:"center"},children:e.jsx("img",{alt:n,src:a})}),e.jsx(C,{colSpan:2,children:n}),c]})},Pt=()=>e.jsxs(O,{children:[e.jsx(C,{colSpan:1}),e.jsx(P,{colSpan:2,children:"Flow (per minute)"}),e.jsx(P,{colSpan:1,align:"right",children:"Total"}),e.jsx(P,{colSpan:1,align:"right",children:"Per array"}),e.jsx(P,{colSpan:1,align:"right",children:"Per facility"})]}),Mt=t=>{const{data:n,placement:o}=t,{materialFlowPerMinutePerFacility:s,productFlowPerMinutePerFacility:r}=n,{facilitiesNeeded:i,facilitiesPerArray:c}=o,a=Object.entries(s).map(([p,d],u)=>e.jsx(ie,{label:p,perFacility:-d,perArray:-d*i,perTotal:-d*c},`m-${p}-${u}`)),l=Object.entries(r).map(([p,d],u)=>e.jsx(ie,{label:p,perFacility:d,perArray:d*i,perTotal:d*c},`prod-${p}-${u}`));return e.jsx(x,{square:!0,elevation:2,children:e.jsx(pe,{children:e.jsxs(fe,{children:[e.jsx(me,{children:e.jsx(Pt,{})}),e.jsxs(he,{children:[a,l]})]})})})},It=t=>{const{placement:n}=t,{current:o}=m.useRef([{icon:e.jsx(k,{color:"secondary"}),render:r=>r.facilitiesPerArray,label:"Facilities per array"},{icon:e.jsx(k,{color:"secondary"}),render:r=>r.arraysNeeded,label:"Arrays needed"},{icon:e.jsx(k,{color:"secondary"}),render:r=>r.facilitiesNeeded,label:"Total facilities needed"},{icon:e.jsx(k,{color:"secondary"}),render:r=>r.leftoverFacilities,label:"Leftover facilities"}]),s=o.map(({icon:r,label:i,render:c})=>e.jsxs(Y,{disableGutters:!0,children:[e.jsx(T,{children:r}),e.jsx(b,{primary:i,secondary:c(n)})]},i));return e.jsx(x,{square:!0,elevation:2,children:e.jsxs(B,{dense:!0,disablePadding:!0,children:[e.jsx(z,{disableGutters:!0,disableSticky:!0,children:"Placement"}),s]})})},Tt=t=>{const{recipe:n}=t,{current:o}=m.useRef([{icon:e.jsx(D,{color:"secondary"}),render:r=>`${r.cycleTimeSecond} s`,label:"Cycle time"},{icon:e.jsx(Ve,{color:"secondary"}),render:r=>r.speedupOnly?"No":"Yes",label:"Extra products bonus"},{icon:e.jsx(Qe,{color:"secondary"}),render:r=>Object.entries(r.materialRecord).map(([i,c])=>`${c} ${i}`),label:"Materials"},{icon:e.jsx(Ze,{color:"secondary"}),render:r=>Object.entries(r.productRecord).map(([i,c])=>`${c} ${i}`),label:"Products"}]),s=o.map(({icon:r,label:i,render:c})=>e.jsxs(Y,{disableGutters:!0,children:[e.jsx(T,{children:r}),e.jsx(b,{primary:i,secondary:c(n)})]},i));return e.jsx(x,{square:!0,elevation:2,children:e.jsxs(B,{dense:!0,disablePadding:!0,children:[e.jsx(z,{disableGutters:!0,disableSticky:!0,children:"Recipe Information"}),s]})})},vt=t=>{const{proliferator:n}=t,{current:o}=m.useRef([{icon:e.jsx(D,{color:"secondary"}),render:r=>`${R((r.cycleMultiplier-1)*100)}%`,label:"Bonus cycle speed"},{icon:e.jsx(D,{color:"secondary"}),render:r=>`${R((r.productMultiplier-1)*100)}%`,label:"Bonus products per cycle"},{icon:e.jsx(H,{color:"secondary"}),render:r=>`${R((r.workConsumptionMultiplier-1)*100)}%`,label:"Additional work consumption"}]),s=o.map(({icon:r,label:i,render:c})=>e.jsxs(Y,{disableGutters:!0,children:[e.jsx(T,{children:r}),e.jsx(b,{primary:i,secondary:c(n)})]},i));return e.jsx(x,{square:!0,elevation:2,children:e.jsxs(B,{dense:!0,disablePadding:!0,children:[e.jsx(z,{disableGutters:!0,disableSticky:!0,children:"Proliferator effects"}),s]})})},Ft=t=>{const{facility:n}=t,{current:o}=m.useRef([{icon:e.jsx(et,{color:"secondary"}),render:r=>r.label,label:"Name"},{icon:e.jsx(tt,{color:"secondary"}),render:r=>r.recipeType,label:"Category"},{icon:e.jsx(D,{color:"secondary"}),render:r=>`${R(r.cycleMultiplier*100)}%`,label:"Cycle speed"},{icon:e.jsx(rt,{color:"secondary"}),render:r=>r.connectionCount,label:"Sorter connections"},{icon:e.jsx(H,{color:"secondary"}),render:r=>`${R(r.workConsumptionMW)} MW`,label:"Work comsumption"},{icon:e.jsx(H,{color:"secondary"}),render:r=>`${R(r.idleConsumptionMW)} MW`,label:"Idle comsumption"}]),s=o.map(({icon:r,label:i,render:c})=>e.jsxs(Y,{disableGutters:!0,children:[e.jsx(T,{children:r}),e.jsx(b,{primary:i,secondary:c(n)})]},i));return e.jsx(x,{square:!0,elevation:2,children:e.jsxs(B,{dense:!0,disablePadding:!0,children:[e.jsx(z,{disableGutters:!0,disableSticky:!0,children:"Facility information"}),s]})})},wt=t=>{const{data:n,placement:o}=t;return e.jsx(Je,{children:e.jsxs(M,{container:!0,spacing:2,children:[e.jsxs(M,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:2,children:[e.jsx(It,{placement:o}),e.jsx(Tt,{recipe:n.recipe})]}),e.jsxs(M,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:2,children:[e.jsx(Ft,{facility:n.facility}),e.jsx(vt,{proliferator:n.proliferator})]})]})})},Et=()=>e.jsxs(O,{children:[e.jsx(P,{colSpan:3,children:"Power consumption (MW)"}),e.jsx(P,{colSpan:1,align:"right",children:"Total"}),e.jsx(P,{colSpan:1,align:"right",children:"Per array"}),e.jsx(P,{colSpan:1,align:"right",children:"Per facility"})]}),Ot=t=>{const{data:{workUsageMWPerFacility:n,idleUsageMWPerFacility:o},placement:{facilitiesNeeded:s,facilitiesPerArray:r}}=t,i=[-n*s,-n*r,-n].map((a,l)=>e.jsx(C,{colSpan:1,align:"right",children:R(a)},`supply-${l}`)),c=[-o*s,-o*r,-o].map((a,l)=>e.jsx(C,{colSpan:1,align:"right",children:R(a)},`power-${l}`));return e.jsx(x,{square:!0,elevation:2,children:e.jsx(pe,{children:e.jsxs(fe,{children:[e.jsx(me,{children:e.jsx(Et,{})}),e.jsxs(he,{children:[e.jsxs(O,{children:[e.jsx(C,{colSpan:3,children:"Work"}),i]}),e.jsxs(O,{children:[e.jsx(C,{colSpan:3,children:"Idle"}),c]})]})]})})})},At=t=>{try{return JSON.parse(t)}catch(n){console.warn(n);return}},v=(t,n,o)=>{const s=te(t)??n;return s>o?o:s<n?n:s},te=t=>{const n=Number.parseInt(t);return Number.isNaN(n)?null:n},kt=t=>{const{facility:n,recipe:o,proliferator:s,proliferatorSprayCount:r}=t,{cycleTimeSecond:i,materialRecord:c}=o,a=60/i*n.cycleMultiplier*s.cycleMultiplier,l={};for(const d in c)l[d]=c[d]*a;const p=v(r,0,Number.MAX_SAFE_INTEGER);if(p>0&&s.sprayCount>0){let d=0;for(const j of Object.values(o.materialRecord))d+=a*j;let u=0;for(const j of Object.values(o.productRecord))u+=a*j*s.productMultiplier;l[`${s.label} (materials)`]=d/p,l[`${s.label} (products)`]=u/p}return l},Nt=t=>{const{facility:n,recipe:o,proliferator:s}=t,{cycleTimeSecond:r,productRecord:i}=o,c=60/r*n.cycleMultiplier*s.cycleMultiplier,a={};for(const l in i)a[l]=i[l]*c*s.productMultiplier;return a},_t=t=>{const n=kt(t),o=Nt(t);return{materialFlowPerMinutePerFacility:n,productFlowPerMinutePerFacility:o}},Lt=(t,n)=>{const{facility:o,proliferator:s,recipe:r}=t,i={};for(const[l,p]of Object.entries(n))i[l]=v(p,0,Number.MAX_SAFE_INTEGER);if(Object.values(i).every(l=>l===0))return 0;const c=60/r.cycleTimeSecond*o.cycleMultiplier*s.cycleMultiplier;let a=0;for(const[l,p]of Object.entries(r.productRecord)){const d=p*c*s.productMultiplier,u=i[l]/d;u>a&&(a=u)}return a},Wt=(t,n)=>{const{facility:o,recipe:s,proliferator:r}=t,i={};for(const[l,p]of Object.entries(n))i[l]=v(p,0,Number.MAX_SAFE_INTEGER);if(Object.values(i).every(l=>l===0))return 0;const c=60/s.cycleTimeSecond*o.cycleMultiplier*r.cycleMultiplier;let a=0;for(const[l,p]of Object.entries(s.materialRecord)){const d=p*c,u=i[l]/d;(u>0&&a===0||u<a)&&(a=u)}return a},Ut=t=>{const{flowrate:n,facility:o,recipe:s,proliferator:r}=t,i={};for(const p in n)i[p]=v(n[p],0,Number.MAX_SAFE_INTEGER);const c=60/s.cycleTimeSecond*o.cycleMultiplier*r.cycleMultiplier;let a=0;for(const p in s.materialRecord){const u=i[p]/(i[p]*c);(a===0&&u>0||u<a)&&(a=u)}let l=0;for(const p in s.productRecord){const u=i[p]/(i[p]*c*r.productMultiplier);(l===0&&u>0||u<l)&&(l=u)}return Math.min(a,l)},Dt=t=>{let n=0;t.computeMode==="constraint"?n=Wt(t,t.constraint):n=Lt(t,t.capacity);const o=Ut(t);let s=0,r=0;return o>0&&(s=Math.floor(n/o),n=n-s*o),{facilitiesNeeded:n,facilitiesPerArray:o,arraysNeeded:s,leftoverFacilities:r}},Gt=t=>{const{sorter:n,facility:o}=t;let s=0;for(const r in n){const i=xe(r);if(i===void 0)continue;const c=v(n[r],0,Number.MAX_SAFE_INTEGER);s+=c*i.idleConsumptionMW}return o.idleConsumptionMW+s},$t=t=>{const{facility:n,proliferator:o,sorter:s}=t;let r=0;for(const c in s){const a=xe(c);if(a===void 0)continue;const l=v(s[c],0,Number.MAX_SAFE_INTEGER);r+=l*a.workConsumptionMW}return n.workConsumptionMW*o.workConsumptionMultiplier+r},Yt=t=>{const n=Gt(t),o=$t(t);return{idleUsageMWPerFacility:n,workUsageMWPerFacility:o}},je="facility",ge="recipe",Ce="proliferator",Se="sorter",Re="flowrate",be="proliferatorSprayCount",Pe="computeMode",Me="constraint",Ie="capacity",_=t=>{const n=localStorage.getItem(t);if(n===null)return null;const o=At(n);if(!o||typeof o!="object")return null;for(const i in o)if(typeof i!="string")return null;const s=o;for(const i in s){const c=s[i];if(typeof c!="string"||c!==""&&te(c)===null)return null}return s},w=(t,n)=>{const o=localStorage.getItem(t);return o?n(o):null},L=(t,n)=>{for(const o of n)if(t[o]===void 0)return!1;for(const o in t)if(!n.includes(o))return!1;return!0},Bt=()=>{const t={facility:J("Arc Smelter"),recipe:V("Copper Ingot"),proliferator:G("None"),proliferatorSprayCount:"12",sorter:{"Sorter Mk.I":"","Sorter Mk.II":"","Sorter Mk.III":"","Pile Sorter":""},flowrate:{"Copper Ore":"","Copper Ingot":""},capacity:{"Copper Ingot":""},constraint:{"Copper Ore":""},computeMode:"0"},n=w(Pe,u=>u==="0"||u==="1"?u:null);if(!n)return t;const o=w(je,J);if(!o)return t;const s=w(ge,V);if(!s||s.recipeType!==o.recipeType)return t;const r=w(Ce,G);if(!r||s.speedupOnly&&r.mode===U.EXTRA_PRODUCTS)return t;const i=w(be,u=>{if(u==="")return"";const j=te(u);if(!(!j||j<0))return j.toString()});if(!i)return t;const c=_(Se);if(!c||!L(c,ht().map(u=>u.label)))return t;const a=_(Me);if(!a||!L(a,Object.keys(s.materialRecord)))return t;const l=_(Ie);if(!l||!L(l,Object.keys(s.productRecord)))return t;const p=_(Re);return p===null||!L(p,[...Object.keys(s.materialRecord),...Object.keys(s.productRecord)])?t:{facility:o,recipe:s,proliferator:r,proliferatorSprayCount:i,sorter:c,flowrate:p,capacity:l,constraint:a,computeMode:n}},W=(t,n)=>{const[o,s]=m.useState(n);return m.useEffect(()=>{localStorage.setItem(t,JSON.stringify(o))},[o]),[o,(i,c)=>{s(a=>{const l={...a};return l[i]=c,l})},s]},ce=(t,n,o)=>{let s=0;for(const r in n)r!==t&&(s+=v(n[r],0,o-s));return s},zt=()=>{const{current:t}=m.useRef(Bt()),[n,o]=m.useState(t.computeMode),s=f=>{o(f),localStorage.setItem(Pe,f)},[r,i]=m.useState(t.facility),c=f=>{i(f),localStorage.setItem(je,f.label);const y=ut(f.recipeType);if(!y){console.warn(`Cannot find recipe for ${f.recipeType}`);return}p(y)},[a,l]=m.useState(t.recipe),p=f=>{if(l(f),localStorage.setItem(ge,f.label),f.speedupOnly&&d.mode===U.EXTRA_PRODUCTS){const h=mt(U.PRODUCTION_SPEEDUP);h!==void 0?u(h):console.warn("Cannot find production speedup proliferator")}const y={},I={},g={};for(const h in f.materialRecord)I[h]="",y[h]="";for(const h in f.productRecord)g[h]="",y[h]="";ne(y),Ge(g),We(I)},[d,u]=m.useState(t.proliferator),j=f=>{u(f),localStorage.setItem(Ce,f.label),re(f.sprayCount.toString())},[Te,ve]=m.useState(t.proliferatorSprayCount),re=f=>{ve(f),localStorage.setItem(be,f)},[Fe,we,Ee]=W(Se,t.sorter),Oe=(f,y)=>{if(y===""){we(f,y);return}Ee(I=>{const g={...I},h=ce(f,g,r.connectionCount),K=r.connectionCount-h;return g[f]=K.toString(),g})},[Ae,ke,ne]=W(Re,t.flowrate),Ne=(f,y)=>{if(y===""){ke(f,y);return}ne(I=>{const g={...I},h=r.connectionCount*7200,K=ce(f,I,h),$e=h-K;return g[f]=$e.toString(),g})},[_e,Le,We]=W(Me,t.constraint),[Ue,De,Ge]=W(Ie,t.capacity);return[{facility:r,flowrate:Ae,proliferator:d,proliferatorSprayCount:Te,recipe:a,sorter:Fe,capacity:Ue,computeMode:n,constraint:_e},{handleConstraintUpdate:Le,handleCapacityUpdate:De,handleComputeModeChange:s,handleFacilityChange:c,handleProliferatorChange:j,handleRecipeChange:p,handleSorterChange:Oe,handleFlowrateChange:Ne,handleProliferatorSprayCountChange:re}]},qt=t=>{const n=nt(),o=ot(n.breakpoints.down("md")),{slotMain:s,slotSide:r}=t;return o?e.jsxs(x,{square:!0,elevation:0,children:[e.jsx(x,{square:!0,elevation:2,children:r}),s]}):e.jsx(ue,{square:!0,elevation:0,children:e.jsxs(M,{container:!0,columns:10,children:[e.jsx(M,{item:!0,md:!0,padding:4,height:"100vh",overflow:"auto",children:s}),e.jsx(M,{item:!0,md:3,height:"100vh",overflow:"auto",children:e.jsx(x,{square:!0,elevation:2,children:r})})]})})},Kt=()=>{const[t,n]=zt(),o=_t(t),s=Yt(t),r=Dt(t);return e.jsx(qt,{slotMain:e.jsxs(S,{spacing:2,children:[e.jsx(lt,{data:t,handlers:n}),e.jsx(Mt,{data:o,placement:r}),e.jsx(Ot,{placement:r,data:s}),e.jsx(wt,{data:t,placement:r})]}),slotSide:e.jsx(Rt,{data:t,handlers:n})})},Xt=st({components:{MuiCssBaseline:{styleOverrides:`img {
					loading: lazy;
					width: auto;
					height: 40px;
			}`}},palette:{mode:"dark",text:{primary:it("#fff",.87)},primary:{main:"#7ABBAD"},secondary:{main:"#C8AA81"},background:{paper:"#181D22"}}}),Ht=()=>e.jsxs(ct,{theme:Xt,children:[e.jsx(at,{}),e.jsx(Kt,{})]});Ye(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(Ht,{})}));
